<template name="Ownership_table">
    <div id="owners" class="full-height-scroll">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <tbody>
                {{#each rows}}
                <tr>
                    <td><a href="{{pathFor 'User.show' _id=Person.userId}}" class="client-avatar"><img alt="image" src={{Person.avatar}}></a></td>
                    <td><a href="{{pathFor 'User.show' _id=Person.userId}}" class="client-link">{{Person.displayName}}</a></td>
                    <td class="contact-type"><i class="fa fa-pie-chart"></i></td>
                    <td>{{ownership.share}}</td>
                    <td>
                        {{#if ownership.representor}}
                        <span class="label label-plain"><i class="fa fa-star"></i> {{_ 'representor'}}</span>
                        {{/if}}
                    </td>
                    <td class="text-right">
                        <div class="btn-group">
                            {{#if userHasPermission 'ownerships.update' communityId}}
                              <button class="btn-white btn btn-xs js-edit" data-id={{_id}}><i class="fa fa-pencil"></i> {{_ 'edit'}}</button>
                              {{#unless accepted}}
                              <button class="btn btn-xs {{#if personId}}btn-info{{else}}btn-warning{{/if}} js-invite" data-id={{_id}}><i class="fa fa-user"></i> {{_ 'invite'}}</button>
                              {{/unless}}
                            {{/if}}
                            {{#if userHasPermission 'ownerships.remove' communityId}}
                              <button class="btn-white btn btn-xs js-delete" data-id={{_id}}><i class="fa fa-trash"></i> {{_ 'delete'}}</button>
                            {{/if}}
                        </div>
                    </td>
                </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="Benefactorship_table">
    <div id="benefactors" class="full-height-scroll">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <tbody>
                {{#each rows}}
                <tr>
                    <td><a href="{{pathFor 'User.show' _id=Person.userId}}" class="client-avatar"><img alt="image" src={{Person.avatar}}></a></td>
                    <td><a href="{{pathFor 'User.show' _id=Person.userId}}" class="client-link">{{Person.displayName}}</a></td>
                    <td><span class="label label-plain">{{_ benefactorship.type}}</span></td>
                    <td class="text-right">
                        <div class="btn-group">
                            {{#if userHasPermission 'benefactorships.update' communityId}}
                                <button class="btn-white btn btn-xs js-edit" data-id={{_id}}><i class="fa fa-pencil"></i> {{_ 'edit'}}</button>
                                {{#unless accepted}}
                                <button class="btn btn-xs {{#if personId}}btn-info{{else}}btn-warning{{/if}} js-invite" data-id={{_id}}><i class="fa fa-user"></i> {{_ 'invite'}}</button>
                                {{/unless}}
                            {{/if}}
                            {{#if userHasPermission 'benefactorships.remove' communityId}}
                                <button class="btn-white btn btn-xs js-delete" data-id={{_id}}><i class="fa fa-trash"></i> {{_ 'delete'}}</button>
                            {{/if}}
                        </div>
                    </td>
                </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="Parcel_owners_page">

    <!-- Page heading -->
    {{> Page_heading title=title smallTitle=smallTitle crumbs=pageCrumbs}}

    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-md-10 col-lg-8">
                <div id="owners" class="ibox">
                    <div class="ibox-content">
                        <span class="text-muted small pull-right">{{_ 'Modifiable by'}}: {{_ 'manager'}} {{_ 'role'}}</span>
                        <h2>{{_ 'owners'}}</h2>
                        {{#if userHasPermission 'ownerships.insert' communityId}}
                        <div class="btn-group pull-right">
                            <button class="btn btn-primary btn-sm js-new"><i class="fa fa-plus"></i><strong> {{_ 'new'}} {{_ 'owner'}}</strong></button>
                            <button class="btn btn-white btn-sm js-import"><i class="fa fa-upload"></i><strong></strong></button>
                        </div>
                        {{/if}}
                        <p>
                            {{_ "Parcel's owners list"}} - <i class="fa fa-user"></i> {{ownerships.count}}<br>
                            {{_ "Click person's name to see contact info"}}
                        </p>
                        <br>
                        <div class="member-list">
                            {{#if userHasPermission 'ownerships.update' communityId}}
                            <ul class="nav nav-tabs">
                                <span class="pull-right small text-muted"></span>
                                <li class="active"><a data-toggle="tab" href="#tab-o1"><i class="fa fa-user"></i> {{_ 'Approved'}}</a></li>
                                <li class=""><a data-toggle="tab" href="#tab-o2"><i class="fa fa-user-o"></i> {{_ 'Waiting for approval'}}
                                    {{#if unapprovedOwnerships.count}}
                                    <span class="label badge badge-danger">{{unapprovedOwnerships.count}}</span>
                                    {{/if}}
                                </a></li>
                                <li class=""><a data-toggle="tab" href="#tab-o3"><i class="fa fa-archive"></i> {{_ 'Archived'}}</a></li>
                            </ul>
                            {{/if}}
                            <div class="tab-content">
                                <div id="tab-o1" class="tab-pane active">
                                    {{> Ownership_table rows=ownerships}}
                                </div>
                                <div id="tab-o2" class="tab-pane">
                                    {{> Ownership_table rows=unapprovedOwnerships}}
                                </div>
                                <div id="tab-o3" class="tab-pane">
                                    {{> Ownership_table rows=archivedOwnerships}}
                                </div>    
                            </div>
                        </div>
                    </div>
                </div>

                <div id="benefactors" class="ibox">
                    <div class="ibox-content">
                        <span class="text-muted small pull-right">{{_ 'Modifiable by'}}: {{_ 'manager'}} {{_ 'role'}}</span>
                        <h2>{{_ 'benefactors'}}</h2>
                        {{#if userHasPermission 'benefactorships.insert' communityId}}
                        <div class="btn-group pull-right">
                            <button class="btn btn-primary btn-sm js-new"><i class="fa fa-plus"></i><strong> {{_ 'new'}} {{_ 'benefactor'}}</strong></button>
                            <button class="btn btn-white btn-sm js-import"><i class="fa fa-upload"></i><strong></strong></button>
                        </div>
                        {{/if}}
                        <p>
                            {{_ "Parcel's benefactors list"}} - <i class="fa fa-user"></i> {{benefactorships.count}}<br>
                            {{_ "Click person's name to see contact info"}}
                        </p>
                        <br>
                        <div class="member-list">
                            {{#if userHasPermission 'benefactorships.update' communityId}}
                            <ul class="nav nav-tabs">
                                <span class="pull-right small text-muted"></span>
                                <li class="active"><a data-toggle="tab" href="#tab-b1"><i class="fa fa-user"></i> {{_ 'Approved'}}</a></li>
                                <li class=""><a data-toggle="tab" href="#tab-b2"><i class="fa fa-user-o"></i> {{_ 'Waiting for approval'}}
                                    {{#if unapprovedBenefactorships.count}}
                                    <span class="label badge badge-danger">{{unapprovedBenefactorships.count}}</span>
                                    {{/if}}
                                </a></li>
                                <li class=""><a data-toggle="tab" href="#tab-b3"><i class="fa fa-archive"></i> {{_ 'Archived'}}</a></li>
                            </ul>
                            {{/if}}
                            <div class="tab-content">
                                <div id="tab-b1" class="tab-pane active">
                                    {{> Benefactorship_table rows=benefactorships}}
                                </div>
                                <div id="tab-b2" class="tab-pane">
                                    {{> Benefactorship_table rows=unapprovedBenefactorships}}
                                </div>
                                <div id="tab-b3" class="tab-pane">
                                    {{> Benefactorship_table rows=archivedBenefactorships}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--div class="col-sm-4">
                <div class="ibox contact-cards">
                    <div class="ibox-content">
                        <div class="tab-content">
                            {{#each members}}
                            <div id={{_id}} class="tab-pane {{activeTabClass @index}}">
                                <div class="contact-box center-version">
                                <a href="">
                                    <img alt="image" class="img-circle" src={{Person.avatar}}>
                                    <h3 class="m-b-xs"><strong>{{Person.displayName}}</strong></h3>
                                    <div class="font-bold">{{this.toString}}</div>
                                    <address class="m-t-md">
                                        <i class="fa fa-at"></i> {{Person.user.profile.publicEmail}}<br>
                                        <i class="fa fa-phone"></i> {{Person.user.profile.phone}}<br>
                                    </address>
                                </a>
                                <div class="contact-box-footer">
                                    <button type="button" class="btn btn-primary btn-sm btn-block">
                                        <i class="fa fa-paper-plane"></i> {{_ 'Send Message'}}
                                    </button>
                                </div>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                </div>
            </div-->
        </div>
    </div>
</template>