<template name="Members_panel">
    <div class="sidebar-title">
        <h3> <i class="fa fa-comments-o"></i> {{_'Send messages'}}</h3>
        <small><i class="fa fa-tim"></i> {{_ 'Send messages subtitle'}}.</small>
        {{#if tooManyMembers}}<small> {{_ 'Send messages instructions'}}.</small>{{/if}}
    </div>
    <div class="form-group">
        <div class="input-group">
            <input id="search" type="text" class="form-control" placeholder="{{_ 'search'}}">
            <div class="input-group-addon">
                <span class="glyphicon glyphicon-search js-search" aria-hidden="true"></span>
            </div>
        </div>
    </div>
    <!-- normally there is exactly 1 manager (kk) -->
    {{#if Template.subscriptionsReady}}
    <div>
        {{#each leaders}}
          {{> Member_slot}}
        {{/each}}
        <div class="line">
            <hr class="m-t-none"/>
        </div>
        {{#each members}}
          {{> Member_slot}}
        {{/each}}
    </div>
    {{else}}
        &nbsp;{{_ 'Loading'}}...
    {{/if}}
</template>

<template name="Member_slot">
    {{#if partner.user}}
        <div class="member-slot sidebar-message">
            <a href="">
                <div class="pull-left text-center">
                    <img alt="avatar" class="img-circle message-avatar" src="{{absoluteUrl partner.avatar}}">
                </div>
                <div class="media-body">
                    <strong>{{partner.displayName}}</strong><br>
                    <small class="text-muted">({{this.displayRole}})</small>
                </div>
                <div class="media-body pull-right">
                    <div class="text-right">
                        <!-- online/offline status icon -->
                        <svg height="10" width="10" data-tooltip="{{user/status}}">
                        <!--circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="{{statusCircleColor user/status}}" /-->
                        <circle {{statusCircleParameters user/status}} />
                        </svg>
                        <br>
                        {{#if hasThingsToDisplay}}
                            <span class="badge badge-danger">{{hasThingsToDisplay}}</span>
                        {{/if}}
                    </div>
                </div>
            </a>
        </div>
    {{/if}}
</template>
